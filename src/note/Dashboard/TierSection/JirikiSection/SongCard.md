# SongCard.vue 設計書

## 1. 概要

`SongCard.vue` は、1曲ごとのスコアを管理・表示するカード型コンポーネントです。  
ユーザーが達成ランク・FC状態を編集でき、特定条件で光るエフェクトやラベルが表示されます。

---

## 2. Props

| プロパティ名 | 型     | 説明                       |
|--------------|--------|----------------------------|
| `song`       | `Song` | 楽曲データ1件（title, rank, fc, tierを含む） |

---

## 3. 機能・仕様

| 機能名              | 説明                                                                 |
|---------------------|----------------------------------------------------------------------|
| ランク選択          | `select` によりランクを変更（Normal/Expertに応じてリスト切替）       |
| FCチェック          | `checkbox` により FC 状態を切替（ただし 100%時は強制ON & ロック）   |
| 色付き背景          | ランクに対応した背景色を表示（`getRankColor`）                        |
| ラベル表示          | 100% → `EXCELLENT!!!`、FC → `FULL COMBO!!` を上部に表示                |
| 光エフェクト        | FC/EXCELLENT 時に `backglow` 背景光が表示                             |
| 編集モード          | `editable = true`（現状は固定）                                      |

---

## 4. リアクティブなロジック

| 変数名         | 内容                                                         |
|----------------|--------------------------------------------------------------|
| `localSong`    | propsをローカルコピーし、双方向バインディングに対応         |
| `rankColor`    | `getRankColor(localSong.rank)` による背景色                   |
| `isFC`         | `localSong.fc === true`                                       |
| `isExcellent`  | `localSong.rank === '100%'`                                   |
| `fcLocked`     | `100%` のときは FC をロック                                   |
| `currentRanks` | `mode` に応じて表示するランクリストを切り替え                |

---

## 5. UI構成

| ブロック        | 説明                                                           |
|-----------------|----------------------------------------------------------------|
| `.backglow`     | FC/EXCELLENT時の光る背景（アニメーション付き）               |
| `.fc-label`     | FC時に `FULL COMBO!!` 表示（上部中央）                        |
| `.excellent-label` | 100%時に `EXCELLENT!!!` 表示（上部中央）                 |
| `.card-surface` | カード本体（背景色つき）                                       |
| `.title`        | 楽曲タイトルを中央表示                                         |
| `.bottom`       | ランク `select` と `FC checkbox` を横並びで配置              |

---

## 6. スタイリング概要

- `width`, `height`: 120pxの正方形カード
- `backglow`: ぼかしと色付きの背景エフェクト（FC＝ピンク、EXCELLENT＝金色）
- `animation`: `glow-in` によるふわっと浮かび上がる効果
- `title`: 中央・太字・改行対応
- `bottom`: `select` + `checkbox` を整列

---

## 7. 注意点

- `SongCard` は自己完結型であり、外部の状態更新はローカルで完了しない限り反映されない（保存ロジック未実装）
- `editable` が true 固定のため、編集ON/OFF切り替えが未実装（今後Props化が望ましい）

---

## 8. 拡張予定（ToDo）

- [ ] `editable` を Props 化して、表示専用モードを追加
- [ ] 保存ボタン or オートセーブ連携の実装
- [ ] 長いタイトルの折り返し対応（またはツールチップ表示）
- [ ] カードサイズのレスポンシブ対応（スマホ時は縮小）

