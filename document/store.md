# ğŸ“˜ çŠ¶æ…‹ç®¡ç†è¨­è¨ˆæ›¸ï¼ˆPiniaï¼‰

## ğŸ—‚ ä½¿ç”¨ç›®çš„ã¨å½¹å‰²

| ã‚¹ãƒˆã‚¢å         | ä¸»ãªå½¹å‰²                                           |
|------------------|----------------------------------------------------|
| `authStore.ts`   | èªè¨¼çŠ¶æ…‹ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸­ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚¨ãƒ©ãƒ¼ï¼‰             |
| `filterStore.ts` | æ¥½æ›²ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆãƒ©ãƒ³ã‚¯ãƒ»FCçŠ¶æ…‹ãªã©ï¼‰               |
| `scoreStore.ts`  | ã‚¹ã‚³ã‚¢æƒ…å ±ã®ä¿æŒã¨CRUDï¼ˆå–å¾—ãƒ»æ›´æ–°ãƒ»ä¿å­˜ï¼‰         |
| `uiStore.ts`     | UIã®ãƒ¢ãƒ¼ãƒ‰ç®¡ç†ï¼ˆNormal/Expert, ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ãªã©ï¼‰     |

---

## 1. `authStore.ts`

### â—¾ ä¸»ãªçŠ¶æ…‹ï¼ˆstateï¼‰

| å¤‰æ•°å     | å‹           | èª¬æ˜                                 |
|------------|--------------|--------------------------------------|
| `user`     | `User \| null` | ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±             |
| `isLoading`| `boolean`     | APIé€šä¿¡ç”¨ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ•ãƒ©ã‚°        |
| `error`    | `string`      | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸                     |

### â—¾ ä¸»ãªé–¢æ•°ï¼ˆactionsï¼‰

| é–¢æ•°å      | èª¬æ˜                                      |
|-------------|-------------------------------------------|
| `login()`   | èªè¨¼APIã«ã‚ˆã‚Šãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚’å®Ÿè¡Œ          |
| `logout()`  | èªè¨¼çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢ã—ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç ´æ£„     |
| `fetchUser()` | ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—                |

---

## 2. `filterStore.ts`

### â—¾ ä¸»ãªçŠ¶æ…‹ï¼ˆstateï¼‰

| å¤‰æ•°å           | å‹         | èª¬æ˜                                     |
|------------------|------------|------------------------------------------|
| `selectedRanks`  | `string[]` | è¡¨ç¤ºå¯¾è±¡ãƒ©ãƒ³ã‚¯ãƒªã‚¹ãƒˆï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰       |
| `showFC`         | `boolean`  | FULL COMBO æ›²ã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹              |
| `showNotFC`      | `boolean`  | æœªFCã®æ›²ã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹                   |

### â—¾ ä¸»ãªé–¢æ•°ï¼ˆactionsï¼‰

| é–¢æ•°å         | èª¬æ˜                                |
|----------------|-------------------------------------|
| `toggleRank()` | ãƒ©ãƒ³ã‚¯ã®é¸æŠçŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«åˆ‡ã‚Šæ›¿ãˆ    |
| `reset()`      | å…¨ã¦ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ã‚’åˆæœŸåŒ–        |

---

## 3. `scoreStore.ts`

### â—¾ ä¸»ãªçŠ¶æ…‹ï¼ˆstateï¼‰

| å¤‰æ•°å     | å‹               | èª¬æ˜                                |
|------------|------------------|-------------------------------------|
| `scores`   | `Score[]`        | å…¨ã‚¹ã‚³ã‚¢ä¸€è¦§                        |
| `isSaving` | `boolean`        | ä¿å­˜ä¸­çŠ¶æ…‹ï¼ˆã‚¹ãƒ”ãƒŠãƒ¼ç”¨ï¼‰           |

### â—¾ ä¸»ãªé–¢æ•°ï¼ˆactionsï¼‰

| é–¢æ•°å             | èª¬æ˜                                      |
|--------------------|-------------------------------------------|
| `fetchScores()`    | APIã‹ã‚‰æŒ‡å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¹ã‚³ã‚¢ã‚’å–å¾—         |
| `updateScore()`    | æ¥½æ›²ã”ã¨ã®ãƒ©ãƒ³ã‚¯ãƒ»FCçŠ¶æ…‹ã‚’ä¿å­˜ãƒ»æ›´æ–°      |
| `getScore(songId)` | æŒ‡å®šæ¥½æ›²ã«å¯¾ã™ã‚‹ã‚¹ã‚³ã‚¢ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ |

---

## 4. `uiStore.ts`

### â—¾ ä¸»ãªçŠ¶æ…‹ï¼ˆstateï¼‰

| å¤‰æ•°å        | å‹                        | èª¬æ˜                                 |
|---------------|---------------------------|--------------------------------------|
| `mode`        | `"normal" \| "expert"`    | ãƒ¢ãƒ¼ãƒ‰ï¼ˆNormal / Expertï¼‰           |
| `editMode`    | `boolean`                 | ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ON/OFF                     |
| `targetRank`  | `string`                  | ç›®æ¨™ãƒ©ãƒ³ã‚¯ï¼ˆä¾‹ï¼šAAA+, 98%ãªã©ï¼‰      |

### â—¾ ä¸»ãªé–¢æ•°ï¼ˆactionsï¼‰

| é–¢æ•°å         | èª¬æ˜                                 |
|----------------|--------------------------------------|
| `toggleMode()` | ãƒ¢ãƒ¼ãƒ‰ã‚’ãƒˆã‚°ãƒ«åˆ‡ã‚Šæ›¿ãˆ               |
| `setEditMode()`| ç·¨é›†çŠ¶æ…‹ã‚’è¨­å®š                       |

---

## ğŸ§­ çŠ¶æ…‹ä¾å­˜ãƒãƒˆãƒªã‚¯ã‚¹

| çŠ¶æ…‹                     | ä½¿ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹               |
|--------------------------|------------------------------------|
| `authStore.user`         | `Header.vue`, `Dashboard.vue`       |
| `uiStore.mode`           | `ModeSwitch.vue`, `RankSelect.vue`  |
| `filterStore.selectedRanks` | `FilterPanel.vue`, `JirikiSection.vue` |
| `scoreStore.scores`      | `SongCard.vue`, `ProgressBar.vue`   |

---

## ğŸ” ä»Šå¾Œã®æ‹¡å¼µå€™è£œ

| å†…å®¹                           | å¯¾å¿œã‚¹ãƒˆã‚¢        | å‚™è€ƒ                          |
|--------------------------------|-------------------|-------------------------------|
| `user_visit` ã‚’ç®¡ç†           | `visitStore.ts`   | è¨ªå•æ¸ˆã¿åº—èˆ—ã¨æ—¥æ™‚ã®è¨˜éŒ²       |
| `shopStore.ts` ã®å°å…¥         | `shops.csv`èª­è¾¼ç®¡ç† | åº—èˆ—ä¸€è¦§ã®çŠ¶æ…‹ç®¡ç†ã‚’æ˜ç¤ºçš„ã« |
| `localStorage`ã«ã‚ˆã‚‹æ°¸ç¶šåŒ–   | `authStore`, etc. | ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä¿æŒ |

---

## ğŸ“„ Appendix: å‹å®šç¾©ä¾‹ï¼ˆtypes.tsï¼‰

```ts
export interface User {
  id: number
  name: string
  email: string
  target: string
}

export interface Score {
  id: number
  user_id: number
  song_id: number
  rank: string
  fc: boolean
}

export interface Shop {
  id: number
  name: string
  address: string
  price: number
  number_of_machine: number
  description: string
  lat: number
  lng: number
}
